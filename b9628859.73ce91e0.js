(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{105:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return p})),t.d(n,"default",(function(){return b}));var a=t(3),o=t(7),r=(t(0),t(123)),i={id:"config",title:"Set Up the Config Manager"},c={unversionedId:"concepts/config",id:"concepts/config",isDocsHomePage:!1,title:"Set Up the Config Manager",description:"Config Manager",source:"@site/docs\\concepts\\configmanager.md",slug:"/concepts/config",permalink:"/lumos_doc/docs/concepts/config",editUrl:"https://github.com/xying21/lumos_doc/tree/master/docs/concepts/configmanager.md",version:"current"},p=[{value:"Config Manager",id:"config-manager",children:[]},{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Set Up the Config Manager by Using Pre-defined Configurations",id:"set-up-the-config-manager-by-using-pre-defined-configurations",children:[]},{value:"Set Up the Config Manager by Using a Local Config File",id:"set-up-the-config-manager-by-using-a-local-config-file",children:[]}],l={toc:p};function b(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"config-manager"},"Config Manager"),Object(r.b)("p",null,"The config manager  (",Object(r.b)("inlineCode",{parentName:"p"},"@ckb-lumos/config-manager"),") supports the DApp to boot with a specific chain configuration. All the other components in Lumos can leverage the configuration from the config manager directly."),Object(r.b)("p",null,"A DApp can set up the config manger in two different ways according to the network that the DApp connects:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"../tutorials/config#set-up-the-config-manager-by-using-pre-defined-configurations"},"Set Up the Config Manager by Using Pre-defined Configurations"),". "),Object(r.b)("p",{parentName:"li"},"For a DApp to connect to a ",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Mainnet"))," or ",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"Testnet"))," node, set up the config manager by using pre-defined configurations. The pre-defined configurations is specified by the ",Object(r.b)("inlineCode",{parentName:"p"},"LUMOS_CONFIG_NAME")," variable.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"../tutorials/config#set-up-the-config-manager-by-using-a-local-config-file"},"Set Up the Config Manager by Using a Local Config File"),"."),Object(r.b)("p",{parentName:"li"},"For a DApp to connect to a CKB node on ",Object(r.b)("strong",{parentName:"p"},Object(r.b)("em",{parentName:"strong"},"DEV chain")),", set up the config manager by using a local config file. The local config file is specified by the ",Object(r.b)("inlineCode",{parentName:"p"},"LUMOS_CONFIG_FILE")," variable. "))),Object(r.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(r.b)("p",null,"The following prerequisites apply for setting up the config manager:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Node.js is installed."),Object(r.b)("li",{parentName:"ul"},"Lumos packages are installed.")),Object(r.b)("h2",{id:"set-up-the-config-manager-by-using-pre-defined-configurations"},"Set Up the Config Manager by Using Pre-defined Configurations"),Object(r.b)("p",null,"For the DApp to connect a ",Object(r.b)("em",{parentName:"p"},"Mainnet")," or ",Object(r.b)("em",{parentName:"p"},"Testnet")," node, choose corresponding pre-defined configurations for setting up the config manager:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"LINA"),": Mainnet pre-defined configurations")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"AGGRON4"),": Testnet pre-defined configurations "),Object(r.b)("p",{parentName:"li"},Object(r.b)("strong",{parentName:"p"},"Note"),": When Testnet is reset, the Lumos config manager must be upgraded with the new Testnet configurations."))),Object(r.b)("p",null,"The following example sets up the config manager for a CKB ",Object(r.b)("strong",{parentName:"p"},"Mainnet")," node by specifying the variable ",Object(r.b)("code",null,"LUMOS_CONFIG_NAME")," with ",Object(r.b)("b",null,"LINA"),". You can specify the variable with ",Object(r.b)("b",null,"AGGRON4")," for a CKB ",Object(r.b)("strong",{parentName:"p"},"Testnet")," node."),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript"},'import { env } from "process";\nimport { getConfig, initializeConfig } from "@ckb-lumos/config-manager";\nenv.LUMOS_CONFIG_NAME = "LINA";\ninitializeConfig();\nexport const CONFIG = getConfig();\n')),Object(r.b)("h2",{id:"set-up-the-config-manager-by-using-a-local-config-file"},"Set Up the Config Manager by Using a Local Config File"),Object(r.b)("p",null,"For the DApp to connect a CKB node on ",Object(r.b)("strong",{parentName:"p"},"DEV chain"),", use a local configuration file for setting up the config manager."),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"LUMOS_CONFIG_FILE")," variable can be set pointing to a configuration file. Lumos reads the configurations from that configuration file.  "),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Note"),": If the ",Object(r.b)("inlineCode",{parentName:"p"},"LUMOS_CONFIG_FILE")," variable is not set, Lumos reads configurations from the ",Object(r.b)("inlineCode",{parentName:"p"},"config.json")," file in the current directory."),Object(r.b)("p",null,"The following example sets up the config manager for a CKB node on ",Object(r.b)("strong",{parentName:"p"},"DEV chain"),"."),Object(r.b)("p",null,"Step 1. Prepare the config.json file in the DApp root directory, for example, hellolumos/config.json."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-json",metastring:'title="hellolumos/config.json"',title:'"hellolumos/config.json"'},'{\n  "PREFIX": "ckt",\n  "SCRIPTS": {\n    "SECP256K1_BLAKE160": {\n      "CODE_HASH": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n      "HASH_TYPE": "type",\n      "TX_HASH": "0xace5ea83c478bb866edf122ff862085789158f5cbff155b7bb5f13058555b708",\n      "INDEX": "0x0",\n      "DEP_TYPE": "dep_group",\n      "SHORT_ID": 0\n    },\n    "SECP256K1_BLAKE160_MULTISIG": {\n      "CODE_HASH": "0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",\n      "HASH_TYPE": "type",\n      "TX_HASH": "0xace5ea83c478bb866edf122ff862085789158f5cbff155b7bb5f13058555b708",\n      "INDEX": "0x1",\n      "DEP_TYPE": "dep_group",\n      "SHORT_ID": 1\n    },\n    "DAO": {\n      "CODE_HASH": "0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",\n      "HASH_TYPE": "type",\n      "TX_HASH": "0xa563884b3686078ec7e7677a5f86449b15cf2693f3c1241766c6996f206cc541",\n      "INDEX": "0x2",\n      "DEP_TYPE": "code"\n    }\n  }\n}\n')),Object(r.b)("p",null,"Step 2. Set up the config manager in the DApp as follows."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-typescript",metastring:'title="hellolumos/src/index.ts"',title:'"hellolumos/src/index.ts"'},'import { env } from "process";\nimport { getConfig, initializeConfig } from "@ckb-lumos/config-manager";\nenv.LUMOS_CONFIG_FILE = env.LUMOS_CONFIG_FILE || "./config.json";\ninitializeConfig();\nexport const CONFIG = getConfig();\n')))}b.isMDXComponent=!0},123:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return u}));var a=t(0),o=t.n(a);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=o.a.createContext({}),b=function(e){var n=o.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},f=function(e){var n=b(e.components);return o.a.createElement(l.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},g=o.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),f=b(t),g=a,u=f["".concat(i,".").concat(g)]||f[g]||s[g]||r;return t?o.a.createElement(u,c(c({ref:n},l),{},{components:t})):o.a.createElement(u,c({ref:n},l))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=g;var c={};for(var p in n)hasOwnProperty.call(n,p)&&(c[p]=n[p]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<r;l++)i[l]=t[l];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);