<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/lumos_doc/blog/rss.xml" title="Lumos Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/lumos_doc/blog/atom.xml" title="Lumos Blog Atom Feed"><title data-react-helmet="true">Assemble Transactions | Lumos</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Assemble Transactions | Lumos"><meta data-react-helmet="true" name="description" content="The goal and core functionality of a DApp built on top of Lumos is to build transactions in response to user requests. Lumos provides the TransactionSkeleton interface that significantly simplifies the transaction assembling process. Each transaction skeleton corresponds to an action, and will be built into a single transaction that is ready to be submitted to CKB."><meta data-react-helmet="true" property="og:description" content="The goal and core functionality of a DApp built on top of Lumos is to build transactions in response to user requests. Lumos provides the TransactionSkeleton interface that significantly simplifies the transaction assembling process. Each transaction skeleton corresponds to an action, and will be built into a single transaction that is ready to be submitted to CKB."><meta data-react-helmet="true" property="og:url" content="https://github.com/xying21/lumos_doc/lumos_doc/docs/tutorials/buildtransactions"><link data-react-helmet="true" rel="shortcut icon" href="/lumos_doc/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://github.com/xying21/lumos_doc/lumos_doc/docs/tutorials/buildtransactions"><link rel="stylesheet" href="/lumos_doc/styles.4574274a.css">
<link rel="preload" href="/lumos_doc/styles.e9d6a29e.js" as="script">
<link rel="preload" href="/lumos_doc/runtime~main.4e7aa679.js" as="script">
<link rel="preload" href="/lumos_doc/main.c54fe934.js" as="script">
<link rel="preload" href="/lumos_doc/1.ce28eda0.js" as="script">
<link rel="preload" href="/lumos_doc/1be78505.db3ab4b3.js" as="script">
<link rel="preload" href="/lumos_doc/ece76bd1.c375ba78.js" as="script">
<link rel="preload" href="/lumos_doc/53.0dfa0f1d.js" as="script">
<link rel="preload" href="/lumos_doc/52.1be1cfd7.js" as="script">
<link rel="preload" href="/lumos_doc/f976f453.43f5974d.js" as="script">
<link rel="preload" href="/lumos_doc/51.96fb195b.js" as="script">
<link rel="preload" href="/lumos_doc/99a42e31.f6b26a8e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/lumos_doc/"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nervosnetwork/lumos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link" aria-label="GitHub"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/lumos_doc/docs/introduction/intro">Docs</a><a href="https://nervosnetwork.github.io/lumos/globals.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Documenation</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/lumos_doc/"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/nervosnetwork/lumos" target="_blank" rel="noopener noreferrer" class="menu__link github-link" aria-label="GitHub"></a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/lumos_doc/docs/introduction/intro">Docs</a></li><li class="menu__list-item"><a href="https://nervosnetwork.github.io/lumos/globals.html" target="_blank" rel="noopener noreferrer" class="menu__link">API Documenation</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a tabindex="-1" class="sidebarLogo_xFc8" href="/lumos_doc/"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--light_3CMI"><img src="/lumos_doc/img/nervoslumos.svg" alt="Lumos" class="themedImage_YANc themedImage--dark_3ARp"></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/lumos_doc/docs/introduction/about">Home</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/introduction/intro">Lumos Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/introduction/lumoscomponents">Lumos Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/introduction/prerequisites">Prerequisites</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/preparation/setupsystem">Set Up the Development Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/preparation/installckb">Install a CKB Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/preparation/createaccount">Create Accounts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/preparation/hellolumos">Hello Lumos</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/installlumos">Install Lumos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/config">Set Up the Config Manager</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/indexer">Set Up the Lumos Indexer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/querycells">Query on Cells</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/querytransactions">Query on Transactions</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/lumos_doc/docs/tutorials/buildtransactions">Assemble Transactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/lumos_doc/docs/tutorials/manageaccounts">Manage Accounts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lumos_doc/docs/tutorials/integratenft">DApps on CKB Workshop Code</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Assemble Transactions</h1></header><div class="markdown"><p>The goal and core functionality of a DApp built on top of Lumos is to build transactions in response to user requests. Lumos provides the <a href="https://github.com/nervosnetwork/lumos/blob/develop/packages/helpers/src/index.ts#L212" target="_blank" rel="noopener noreferrer">TransactionSkeleton</a> interface that significantly simplifies the transaction assembling process. Each transaction skeleton corresponds to an action, and will be built into a single transaction that is ready to be submitted to CKB.</p><p>This guide introduces the general workflow of assembling transactions. The workflow applies to the following examples of a common transfer operation, DAO deposit and withdraw operations, and a transfer operation with the <code>locktimepool</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="prerequisites"></a>Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><p>The following prerequisites apply for building transactions by using Lumos:</p><ul><li>The development environment is set up. For more information, see <a href="http://localhost:3000/lumos_doc/docs/preparation/setupsystem" target="_blank" rel="noopener noreferrer">Set Up the Development Environment</a>.</li><li>The CKB node is installed and started on DEV chain. For more information, see <a href="http://localhost:3000/lumos_doc/docs/preparation/installckb" target="_blank" rel="noopener noreferrer">Install a CKB Node</a>.</li><li>The Lumos packages (@ckb-lumos/base, @ckb-lumos/indexer, @ckb-lumos/helpers, @ckb-lumos/config-manager, @ckb-lumos/common-scripts, @ckb-lumos/rpc) are installed.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="environment"></a>Environment<a class="hash-link" href="#environment" title="Direct link to heading">#</a></h2><p>The following examples are verified on Ubuntu 20.04.2. Steps on the other platforms can be adjusted accordingly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="general-workflow"></a>General Workflow<a class="hash-link" href="#general-workflow" title="Direct link to heading">#</a></h2><ol><li><p><strong>The DApp creates a transaction skeleton</strong>.</p></li><li><p><strong>The DApp adds the fee for the transaction</strong>. The sender or someone other than the sender can pay the fee. </p></li><li><p><strong>The DApp prepares the signing entries</strong>. The signing entries are the data that the user&#x27;s wallet needs to sign to provide valid witnesses for the input lock scripts. </p></li><li><p><strong>The DApp acquires the signature from a user wallet</strong>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>From the security perspective of a DApp, Lumos does not support built-in message signing. So the DApp needs to send the raw transaction  to the user wallet to acquire signatures. The raw transaction contains all the cells and dependencies for the action and the data that needs to be signed. </p></div></div></li><li><p><strong>The DApp seals the transaction.</strong> The transaction with signatures is forwarded to the DApp. The DApp seals the transaction by adding the transaction signatures to the transaction structure. </p></li><li><p><strong>The DApp forwards this finalized transaction to the CKB network</strong>. The DApp forwards the sealed transaction to the CKB network through the RPC interface. Upon successful receipt, the CKB network returns the transaction hash to the DApp. The transaction hash is sent back to the client such that the client can track the transactions.</p></li><li><p><strong>(Optional) The DApp gets the transaction status.</strong></p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="transfer-ckb-in-a-common-transaction"></a>Transfer CKB in a Common Transaction<a class="hash-link" href="#transfer-ckb-in-a-common-transaction" title="Direct link to heading">#</a></h3><p>The @ckb-lumos/common-scripts package includes a <code>common</code> script that can transfer capacity from <code>fromInfos</code> to an address, add the transaction fee and signing entries to the transaction.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-1-create-a-transaction-skeleton"></a><strong>Step 1. Create a transaction skeleton.</strong><a class="hash-link" href="#step-1-create-a-transaction-skeleton" title="Direct link to heading">#</a></h4><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/common.ts#L175" target="_blank" rel="noopener noreferrer">common.transfer</a> function can be used to create a common transfer transaction.</p><p><strong>Constructor</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">transfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    fromInfos</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">FromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    toAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Address</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">  </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bigint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    changeAddress</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Address</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tipHeader</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">  </span></div><div class="token-line" style="color:#403f53"><span class="token plain">        config </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> undefined</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">  </span></div><div class="token-line" style="color:#403f53"><span class="token plain">        useLocktimeCellsFirst </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">true</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">  </span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token maybe-class-name">LocktimePoolCellCollector</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> locktimePool</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access maybe-class-name">CellCollector</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">   config</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain">   useLocktimeCellsFirst</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">boolean</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain">  </span><span class="token maybe-class-name">LocktimePoolCellCollector</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">any</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Lumos supports gathering input cells from multiple wallets as a single unit by using the <var>fromInfos</var> parameter. It is a array of wallet parameters of a <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/from_info.ts#L20" target="_blank" rel="noopener noreferrer">MultisigScript</a>, Address (string), <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/from_info.ts#L31" target="_blank" rel="noopener noreferrer">ACP</a> or <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/from_info.ts#L36" target="_blank" rel="noopener noreferrer">CustomScript</a> type. MultisigScript is used for the secp256k1_blake160_multisig lock script (the transactions that require multi-signatures).</p><p>An example of <var>fromInfos</var> including MultisigScript:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> fromInfos </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;ckb1qyqwyxfa75whssgkq9ukkdd30d8c7txct0gq5f9mxs&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token constant" style="color:rgb(72, 118, 214)">R</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token constant" style="color:rgb(72, 118, 214)">M</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    publicKeyHashes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x36c329ed630d6ce750712a477543672adab57f4c&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> If <var>changeAddress</var> is not specified, the first element of <var>fromInfos</var> is used as the change address. </p><p>The <code>common.transfer</code> function can use cells with lock period in priority over other cells by specifying <var>tipHeader</var> in the transfer function.</p><p>To use the cells without lock period, just use <code>undefined</code> for <var>tipHeader</var> or specify the <var>useLocktimeCellsFirst</var> parameter as false.</p><p>The following example creates a transaction skeleton with the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/common.ts#L175" target="_blank" rel="noopener noreferrer" title="(txSkeleton: TransactionSkeletonType, fromInfos: FromInfo[], toAddress: string, amount: bigint, changeAddress?: string | undefined, tipHeader?: Header | undefined, { config, useLocktimeCellsFirst&lt;/var&gt;, &lt;var&gt;LocktimePoolCellCollector&lt;/var&gt;, }?)">common.transfer</a> function.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/commonTransfer()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tipheader </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">get_tip_header</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain">txSkeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">transfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            fromInfos</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            toAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            undefined</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">            tipheader</span></div><div class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-2-add-the-fee-for-the-transaction"></a><strong>Step 2. Add the fee for the transaction.</strong><a class="hash-link" href="#step-2-add-the-fee-for-the-transaction" title="Direct link to heading">#</a></h4><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/common.ts#L412" target="_blank" rel="noopener noreferrer">common.payFee</a> function is used in the following example to add the transaction fee to the transaction skeleton.</p><p><strong>Constructor</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  fromInfos</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">FromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bigint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  tipHeader</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    config </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> undefined</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    useLocktimeCellsFirst </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">true</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    enableDeductCapacity </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(188, 84, 84)">true</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    config</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Config</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    useLocktimeCellsFirst</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">boolean</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    enableDeductCapacity</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">boolean</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/commonTransfer()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">txSkeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        fromInfos</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-3-prepare-the-signing-entries"></a><strong>Step 3. Prepare the signing entries.</strong><a class="hash-link" href="#step-3-prepare-the-signing-entries" title="Direct link to heading">#</a></h4><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/common.ts#L434" target="_blank" rel="noopener noreferrer">common.prepareSigningEntries</a> function is used to add the signing entries to the transaction skeleton. The result is a raw transaction that requires signatures.</p><p><strong>Constructor</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> undefined </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Options</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/commonTransfer()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-4-sign-and-seal-the-transaction"></a><strong>Step 4. Sign and seal the transaction.</strong><a class="hash-link" href="#step-4-sign-and-seal-the-transaction" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Lumos does not support built-in message signing. The DApp needs to send the raw transaction to the user wallet to acquire signatures. </p></div></div><p>For simplicity and demonstration, this example uses the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/hd/src/key.ts#L7" target="_blank" rel="noopener noreferrer">key.signRecoverable</a> function of the HD wallet manager (@ckb-lumos/hd) package to generate a signature based on the private key of the account. </p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/signandSeal()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/hd&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> sealTransaction </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/helpers&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">txskeleton</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">TransactionSkeletonType</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privatekey </span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Transaction</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> message </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> txskeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token operator" style="color:rgb(12, 150, 155)">?</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> sig </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">signRecoverable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">message</span><span class="token operator" style="color:rgb(12, 150, 155)">!</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> privatekey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">sealTransaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txskeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">sig</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The following is a signature output example：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">  </span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4f73f26e51bee76d89edb74aee20e6fb2f8c670881f087aba04be80d7bd05117579d2bcfea3618d55473504e06586c10eecb76169d2ef0849c72e50a2f5d2b9500&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>To seal the transaction, the example uses the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/helpers/src/index.ts#L257" target="_blank" rel="noopener noreferrer">sealTransaction</a> function of the @ckb-lumos/helpers package to add the transaction signatures to the transaction skeleton.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-5-send-this-finalized-transaction-to-the-ckb-network"></a><strong>Step 5. Send this finalized transaction to the CKB network.</strong><a class="hash-link" href="#step-5-send-this-finalized-transaction-to-the-ckb-network" title="Direct link to heading">#</a></h4><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/rpc/src/index.ts#L339" target="_blank" rel="noopener noreferrer">send_transaction</a> function of the @ckb-lumos/rpc package can be used to send the transaction to the CKB network. The function sends the transaction to chain and returns a hash for the transaction. The hash can then be used to track the transactions.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/commonTransfer()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">RPC</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/rpc&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> rpc </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RPC</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;http://127.0.0.1:8114&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>A transaction hash output example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x10104ec6857fd99b818e7b401216268c067ce7fbc536b77c86f3565c108e958e</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The earlier versions before 0.16.0 require the Anyone-Can-Pay (ACP) script for submitting transactions. If you fail to submit transactions because of missing the ACP script, you can upgrade Lumos to the latest version, or copy a dummy script into the config.json file under the root of the DApp project to fix the error.</p></div></div><p><strong>Step 6. (Optional) Get the Transaction Status.</strong></p><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/rpc/src/index.ts#L196" target="_blank" rel="noopener noreferrer">get_transaction</a> function of the @ckb-lumos/rpc package can be used to get the transaction with status. </p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/commonTransfer()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token constant" style="color:rgb(72, 118, 214)">RPC</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/rpc&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> rpc </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RPC</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;http://127.0.0.1:8114&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> txWithStatus</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">get_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Transaction status is:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">txWithStatus</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">tx_status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="deposit-ckb-to-dao"></a>Deposit CKB to DAO<a class="hash-link" href="#deposit-ckb-to-dao" title="Direct link to heading">#</a></h3><blockquote><p>Nervos DAO is a smart contract. Users can interact the same way as any smart contract on CKB with Nervos DAO. One function of Nervos DAO is to provide an dilution counter-measure for CKByte holders. By deposit in Nervos DAO, holders get proportional secondary rewards, which guarantee their holding are only affected by hardcapped primary issuance as in Bitcoin. For more information about Nervos DAO, see <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0023-dao-deposit-withdraw/0023-dao-deposit-withdraw.md" target="_blank" rel="noopener noreferrer">RFC: Nervos DAO</a>.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-1-create-a-transaction-skeleton-with-the-dao-script"></a><strong>Step 1. Create a transaction skeleton with the DAO script.</strong><a class="hash-link" href="#step-1-create-a-transaction-skeleton-with-the-dao-script" title="Direct link to heading">#</a></h4><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/dao.ts#L112" target="_blank" rel="noopener noreferrer">dao.deposit</a> is used to deposit CKB to DAO. The deposited cells are frozen after the deposit operation.</p><p><strong>Constructor</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">deposit</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  txSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">FromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  toAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Address</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bigint</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> undefined </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Options</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The <var>fromInfo</var> parameter must be specified when it is a <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/from_info.ts#L20" target="_blank" rel="noopener noreferrer">MultisigScript</a> script. The same address can be used as the <code>fromInfo</code> and <code>toAddress</code> in the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/dao.ts#L112" target="_blank" rel="noopener noreferrer">deposit</a> function.</p><p>The following example creates a transaction skeleton for the deposit action with the cells provided by the indexer. </p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/deposit2DAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Deposit to DAO transaction&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">deposit</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">toAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Use the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/helpers/src/index.ts#L224" target="_blank" rel="noopener noreferrer">createTransactionFromSkeleton</a> function to view the current skeleton. </p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/deposit2DAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> createTransactionFromSkeleton </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/helpers&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">JSON</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">stringify</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">null</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-2-add-the-fee-for-the-deposit-transaction"></a><strong>Step 2. Add the fee for the deposit transaction.</strong><a class="hash-link" href="#step-2-add-the-fee-for-the-deposit-transaction" title="Direct link to heading">#</a></h4><p>The <code>secp256k1_blake160</code>, <code>secp256k1_blake160_multisig</code> and <code>locktime_pool</code> script are similar to the <code>common</code> script. It is recommended to use the <code>common</code> script to deal with those lock scripts for the <code>payFee</code> action and the <code>prepareSigningEntries</code> action.</p><p>The <code>deposit</code> action and the <code>payFee</code> action are using the same address. If you checked the transaction skeleton after incurring fees, you can notice that the transaction skeleton has only one input for the two actions. Lumos can intelligently rewrite the change cells generated in the deposit action to pay enough transaction fee. </p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/deposit2DAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-3-prepare-the-signing-entries-1"></a><strong>Step 3. Prepare the signing entries.</strong><a class="hash-link" href="#step-3-prepare-the-signing-entries-1" title="Direct link to heading">#</a></h4><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/deposit2DAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This example loops through the skeleton, and creates <code>signingEntries</code> by using the <code>common</code> script.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-4-sign-and-seal-the-transaction-1"></a><strong>Step 4. Sign and seal the transaction.</strong><a class="hash-link" href="#step-4-sign-and-seal-the-transaction-1" title="Direct link to heading">#</a></h4><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Lumos does not support built-in message signing. The DApp needs to send the raw transaction to the user wallet to acquire signatures. </p></div></div><p>For simplicity and demonstration, the example uses the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/hd/src/key.ts#L7" target="_blank" rel="noopener noreferrer">key.signRecoverable</a> function of the HD wallet manager (@ckb-lumos/hd) to generate a signature based on the private key of the account. </p><p>For more information, see Step 4 in the common transaction section.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="step-5-send-this-finalized-transaction-to-the-ckb-network-1"></a><strong>Step 5. Send this finalized transaction to the CKB network</strong><a class="hash-link" href="#step-5-send-this-finalized-transaction-to-the-ckb-network-1" title="Direct link to heading">#</a></h4><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/deposit2DAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"> </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The following is a deposit transaction hash output example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x655bac89e443db42d48644f9fd89ddee70691f8e39ee4635c313375e8b2e6c0a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>deposit2DAO</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> hellolumos</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">accounts,buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const alice </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.ALICE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.deposit2DAO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,20000000000n,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">Deposit to DAO transaction</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;version&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;cell_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xa563884b3686078ec7e7677a5f86449b15cf2693f3c1241766c6996f206cc541&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xace5ea83c478bb866edf122ff862085789158f5cbff155b7bb5f13058555b708&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_group&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;header_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;inputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;since&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;previous_output&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xd1b20dd4042374ad44d8ef9489420ff9d09cb6e72767fa549926ca42deced13a&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x4a817c800&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x1242f69cc698&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs_data&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0000000000000000&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;witnesses&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x55000000100000005500000055000000410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">signingEntries: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;witness_args_lock&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    message: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9728a156408f43f8d8de4fe48e3d14f16b1fc3086eaa419ae435f83b08dc6dfa&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x58f49e100a00742396fa66bcd2541fadcae549b56e75350efaa166d5d5bfacdc</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x58f49e100a00742396fa66bcd2541fadcae549b56e75350efaa166d5d5bfacdc&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><p>When the transaction is committed to the chain, check the capacity by using ckb-cli. You can see the deposited 200 CKB in the result.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Ensure the CKB minder is started to enable the transaction to be committed.</p></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ ckb-cli wallet get-capacity --address </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;ckt1qyq8uqrxpw9tzg4u5waydrzmdmh8raqt0k8qmuetsf&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">dao: </span><span class="token number" style="color:rgb(170, 9, 130)">200.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">free: </span><span class="token number" style="color:rgb(170, 9, 130)">16078049.27374609</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">immature: </span><span class="token number" style="color:rgb(170, 9, 130)">8039369.55859429</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">total: </span><span class="token number" style="color:rgb(170, 9, 130)">16078249.27374609</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">CKB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="list-dao-cells"></a>List DAO Cells<a class="hash-link" href="#list-dao-cells" title="Direct link to heading">#</a></h3><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/dao.ts#L87" target="_blank" rel="noopener noreferrer">dao.listDaoCells</a> function can be used to list DAO cells for a specific type (deposit, withdraw or all). </p><p><strong>Constructor</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token plain">dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">listDaoCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">CellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  fromAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Address</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;all&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;deposit&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;withdraw&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> config </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> undefined </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">Options</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/listDAOCells()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">listDAOCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    fromAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">string</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;deposit&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;all&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;withdraw&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;List the&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;cells for the address&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> fromAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> cell </span><span class="token keyword" style="color:rgb(12, 150, 155)">of</span><span class="token plain"> dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">listDaoCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">fromAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">         </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">cell</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>You can also use the collect function of the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/dao.ts#L39" target="_blank" rel="noopener noreferrer">dao.CellCollector</a> class to list the DAO cells of a specific type.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">listDAOCells2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">     fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token maybe-class-name">FromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">     cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;deposit&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;all&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">|</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;withdraw&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> </span><span class="token maybe-class-name">CellCollector</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">dao</span><span class="token class-name punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token class-name" style="color:rgb(17, 17, 17)">CellCollector</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      cellType</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> cell </span><span class="token keyword" style="color:rgb(12, 150, 155)">of</span><span class="token plain"> </span><span class="token maybe-class-name">CellCollector</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">collect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">         </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">cell</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>listDAOCells</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> hellolumos</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">accounts,buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const alice </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.ALICE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.listDAOCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;deposit&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">List the deposit cells </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the address ckt1qyq8uqrxpw9tzg4u5waydrzmdmh8raqt0k8qmuetsf</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x58f49e100a00742396fa66bcd2541fadcae549b56e75350efaa166d5d5bfacdc&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xc9a0077484dbcfa990e0d12b94d137723aec6a9f3ae44e8ed05e19084a076549&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x59&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0000000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="withdraw-a-cell-from-nervos-dao"></a>Withdraw a Cell from Nervos DAO<a class="hash-link" href="#withdraw-a-cell-from-nervos-dao" title="Direct link to heading">#</a></h3><p>Example: </p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/withdrawfromDAO()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">withdrawfromDAO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">cell</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> Cell</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    frominfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    txFee</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privateKey</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Hash</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Withdraw a DAO cell for the address&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">withdraw</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> cell</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">toArray</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">//const rpc = new RPC(&quot;http://127.0.0.1:8114&quot;);</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The example creates a transaction skeleton and then uses the <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/dao.ts#L225" target="_blank" rel="noopener noreferrer">dao.withdraw</a> function to withdraw a deposited cell.</p><p>The steps like adding transaction fee, preparing signing entries, signing and sealing the transaction, are the same as the previous examples. For more information, see the steps in the common transaction and the deposit transaction. </p><p>Try the <code>withdrawfromDAO</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">cd</span><span class="token plain"> hellolumos</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">accounts,buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const alice </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.ALICE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">//Choose one deposited cell from the result of the listDAOCells step.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const depositcell </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">           args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x58f49e100a00742396fa66bcd2541fadcae549b56e75350efaa166d5d5bfacdc&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">         index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xc9a0077484dbcfa990e0d12b94d137723aec6a9f3ae44e8ed05e19084a076549&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x59&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">       data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0000000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.withdrawfromDAO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">fullcell,alice.ADDRESS,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">Withdraw a DAO cell </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the address ckt1qyq8uqrxpw9tzg4u5waydrzmdmh8raqt0k8qmuetsf</span></div><div class="token-line" style="color:#403f53"><span class="token plain">signingEntries: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;witness_args_lock&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    message: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7223a1da8032b346a69fc78957e144427e3c31c4c14afc2d87ed41635707df39&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x00df109343e2335a4e91375b37b575373902660be5f0d3fd0c2281b4425c1a7e</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x00df109343e2335a4e91375b37b575373902660be5f0d3fd0c2281b4425c1a7e&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="unlock-a-withdrawn-cell"></a>Unlock a Withdrawn Cell<a class="hash-link" href="#unlock-a-withdrawn-cell" title="Direct link to heading">#</a></h3><p>A withdrawn cell must be unlocked to make it usable as a live cell for new transactions.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>A withdrawn cell can only be successfully unlocked when the epoch reaches the number that fulfills the lock period, i.e. the lock period of the cell has passed. Otherwise the unlock function will throw an error like &quot;... the transaction is immature because of the since requirement...&quot;. </p><p>The epoch number that fulfills the lock period = 180 (the default lock period) + <var>the epoch number of the deposit transaction</var> + <var>the epoch index of the deposit transaction</var>/<var>epoch length</var>. </p></div></div><p>Example: </p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/unlockWithdraw()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">unlockWithdraw</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">depositinput</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> Cell</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    withdrawinput</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> Cell</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    toaddress</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    frominfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    txFee</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privateKey</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Hash</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> dao</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">unlock</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">depositinput</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">withdrawinput</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">toaddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">toArray</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The epoch information is located in the block header. The following commands gets the epoch information (0xa0009000008) of the deposit transaction. The epoch number that fulfills the lock period for the withdrawn cell is (180+8+9/10) . </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">RPC</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/rpc&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const rpc </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> new RPC</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;http://127.0.0.1:8114&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> await rpc.get_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x58f49e100a00742396fa66bcd2541fadcae549b56e75350efaa166d5d5bfacdc&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> console.log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx.tx_status.block_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">0xc9a0077484dbcfa990e0d12b94d137723aec6a9f3ae44e8ed05e19084a076549</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const block </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> await rpc.get_block</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xc9a0077484dbcfa990e0d12b94d137723aec6a9f3ae44e8ed05e19084a076549&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> console.log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">block.header.epoch</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">0xa0009000008 // </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">number: </span><span class="token number" style="color:rgb(170, 9, 130)">8</span><span class="token plain">, index: </span><span class="token number" style="color:rgb(170, 9, 130)">9</span><span class="token plain">, length: </span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>unlockWithdraw</code> function in the Node.js REPL mode.</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await querytransactions.getTXStatus</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x00df109343e2335a4e91375b37b575373902660be5f0d3fd0c2281b4425c1a7e&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"> // To check </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> the withdraw transaction is committed.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction status is committed </span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.listDAOCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;withdraw&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">List the withdraw cells </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the address ckt1qyq8uqrxpw9tzg4u5waydrzmdmh8raqt0k8qmuetsf</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x00df109343e2335a4e91375b37b575373902660be5f0d3fd0c2281b4425c1a7e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x3d1589aa3a2fdaf2971a2528f5285b9755c983142f9eb42dcf27181711410d85&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x5f&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x5900000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const withdrawcell </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x00df109343e2335a4e91375b37b575373902660be5f0d3fd0c2281b4425c1a7e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x3d1589aa3a2fdaf2971a2528f5285b9755c983142f9eb42dcf27181711410d85&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x5f&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x5900000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.unlockWithdraw</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">depositcell,withdrawcell,alice.ADDRESS, alice.ADDRESS,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">signingEntries: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;witness_args_lock&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    message: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xbc12c2f7123eb9c55addac3c93f22ad337e1cf6324c158b2ec8bd018755dd46f&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0xe41b9a78b96719ac4e75eed1359d804e97812131ed961be0c33f27c6f254e08b</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xe41b9a78b96719ac4e75eed1359d804e97812131ed961be0c33f27c6f254e08b&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="transfer-ckb-with-locktime-pool"></a>Transfer CKB with Locktime Pool<a class="hash-link" href="#transfer-ckb-with-locktime-pool" title="Direct link to heading">#</a></h3><p>Lumos provides <a href="https://github.com/nervosnetwork/lumos/blob/develop/packages/common-scripts/src/locktime_pool.ts" target="_blank" rel="noopener noreferrer">locktimepool</a> for the cells that has a lock period. </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The default lock period is 180 epochs. A cell that has a lock period is available for new transactions after the lock period of the cell passed. Otherwise transactions performed by the locktimepool.transfer function will throw an error like &quot;Uncaught Error: Not enough capacity in from addresses!&quot;. </p></div></div><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/locktimepoolTX()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">locktimePool</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/common-scripts&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">locktimePoolTransfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">toaddress</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    frominfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    amount</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    txFee</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privateKey</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Hash</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tipheader </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">get_tip_header</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> locktimePool</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">transfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> toaddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">tipheader</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">JSON</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">stringify</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">null</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> locktimePool</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">frominfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> tipheader</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> locktimePool</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">toArray</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>locktimepoolTX</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> accounts,querytransactions, buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">//Perform another deposit action to create a deposit cell </span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.deposit2DAO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,20000000000n,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x3162e8ccef8844e83c6cc63122f332f89d7dbd65c7d5f9fa040f4dd532b7abee</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await querytransactions.getTXbyHash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x3162e8ccef8844e83c6cc63122f332f89d7dbd65c7d5f9fa040f4dd532b7abee&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction status is committed</span></div><div class="token-line" style="color:#403f53"><span class="token plain">The block </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the transaction is 0xd025028f2bc4e4381c0fb1743ada5a5c48e387bf6a49e162120ea9a626fe0772</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.listDAOCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;deposit&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">List the deposit cells </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the address ckt1qyq8uqrxpw9tzg4u5waydrzmdmh8raqt0k8qmuetsf</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x3162e8ccef8844e83c6cc63122f332f89d7dbd65c7d5f9fa040f4dd532b7abee&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xd025028f2bc4e4381c0fb1743ada5a5c48e387bf6a49e162120ea9a626fe0772&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xf0e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0000000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain">const depositcell </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a817c800&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x3162e8ccef8844e83c6cc63122f332f89d7dbd65c7d5f9fa040f4dd532b7abee&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xd025028f2bc4e4381c0fb1743ada5a5c48e387bf6a49e162120ea9a626fe0772&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xf0e&#x27;</span><span class="token plain">,</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0000000000000000&#x27;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">//Withdraw the cell from DAO to prepare a withdraw cell that has a lock period.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.withdrawfromDAO</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">depositcell,alice.ADDRESS,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">..</span><span class="token plain">.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0xee510df9a3bebbb00eef405318ba4fa19e5112139a3718ff13921bb962f9dda0</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xee510df9a3bebbb00eef405318ba4fa19e5112139a3718ff13921bb962f9dda0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">//Check the withdraw transaction status.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await querytransactions.getTXbyHash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xee510df9a3bebbb00eef405318ba4fa19e5112139a3718ff13921bb962f9dda0&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction status is committed</span></div><div class="token-line" style="color:#403f53"><span class="token plain">The block </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> the transaction is 0x63afdb21e9ce8173eb84bd59ac519aa80ab6f18cd4c61be9ceb5d536116c7a3f</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">//Check the cell </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> locktimepool, we can see the withdrawn cell </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> the locktime pool.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await querycells.locktimepoolCells</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  cell_output: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    capacity: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x4a81c0719&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    lock: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      code_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      hash_type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;type&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      args: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  out_point: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    tx_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xee510df9a3bebbb00eef405318ba4fa19e5112139a3718ff13921bb962f9dda0&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_hash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x63afdb21e9ce8173eb84bd59ac519aa80ab6f18cd4c61be9ceb5d536116c7a3f&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  block_number: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xf1e&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  data: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x0e0f000000000000&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  since: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x20000a0004000235&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  depositBlockHash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xd025028f2bc4e4381c0fb1743ada5a5c48e387bf6a49e162120ea9a626fe0772&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  withdrawBlockHash: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x63afdb21e9ce8173eb84bd59ac519aa80ab6f18cd4c61be9ceb5d536116c7a3f&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  sinceValidationInfo: undefined</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">//when the epoch reaches </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x20000a0004000235&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token number" style="color:rgb(170, 9, 130)">565</span><span class="token plain">+4/10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain">, the locktimepool.transfer </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> can be executed sucessfully.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.locktimePoolTransfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">bob.ADDRESS,alice.ADDRESS, 10000000000n,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="issue-sudt-tokens"></a>Issue SUDT Tokens<a class="hash-link" href="#issue-sudt-tokens" title="Direct link to heading">#</a></h3><blockquote><p>SUDT is the abbreviation of Simple User Defined Token which defines a minimal standard that contains what’s absolutely needed for dapp developers to issue custom tokens on Nervos CKB. You can refer to <a href="https://talk.nervos.org/t/rfc-simple-udt-draft-spec/4333" target="_blank" rel="noopener noreferrer">RFC: Simple UDT Draft Spec</a> for more details.</p></blockquote><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The SUDT script needs to be deployed to DEV chain before operating on SUDT tokens. For more information about deploying the SUDT script, see <a href="https://docs.nervos.org/docs/labs/sudtbycapsule" target="_blank" rel="noopener noreferrer">Write a SUDT script by Capsule</a>. You can also refer to the <a href="http://localhost:3000/lumos_doc/docs/tutorials/integratenft#deploy-the-nft-script-on-dev-chain" target="_blank" rel="noopener noreferrer">Deploy the NFT Script on DEV Chain</a> example for details about deploying a script on DEV chain.</p></div></div><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/sudt.ts#L43" target="_blank" rel="noopener noreferrer">sudt.issueToken()</a> function can be used to generate SUDT tokens.</p><p><strong>Constructor</strong></p><p><code>issueToken</code>(txSkeleton: TransactionSkeletonType, fromInfo: FromInfo, amount: bigint, capacity?: bigint, tipHeader?: Header, { config = undefined }: Options = {})</p><p>The <var>amount</var> parameter means the amount of SUDT tokens to be generated. The <var>capacity</var> parameter is an optional, and it means the amount of CKB capacity used for the generation. If <var>capacity</var> is not defined, the <code>sudt.issueToken</code> function will use 142 CKB (the minimal CKB capacity of a SUDT cell) to generate SUDT tokens. </p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/issueSUDT()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> sudt </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;@ckb-lumos/common-scripts&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">issueSUDT</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">fromInfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> FromInfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    amount</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    capacity</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    txFee</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privateKey</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Hash</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Issue SUDT tokens.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> sudt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">issueToken</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">capacity</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">JSON</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">stringify</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">null</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">toArray</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>issueSUDT</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> accounts,querytransactions, buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain">// </span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const alice </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.ALICE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const bob </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.BOB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.issueSUDT</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS,60000000000n,20000000000n,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">Issue SUDT tokens.</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;version&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;cell_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xd256a71c30b3f3adbf75a14add58a831336c4beebf04ed142f48d5f608655a48&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xace5ea83c478bb866edf122ff862085789158f5cbff155b7bb5f13058555b708&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_group&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;header_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;inputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;since&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;previous_output&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xd450fbc655a794f60a687af7af1fd742961c582753edcb417acce660e9f9cc52&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x4a817c800&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x82a4784a46f42916f144bfd1926fda614560e403bc131408881de82fee0724ad&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;data&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xf6ea009a4829de7aeecd75f3ae6bcdbaacf7328074ae52a48456a8793a4b1cca&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x2a23bfcd72&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs_data&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x005847f80d0000000000000000000000&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;witnesses&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x55000000100000005500000055000000410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">signingEntries: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;witness_args_lock&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    message: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x94328eafa1895a7b00bc6410136feaddb494a2cc9b19d39569d80477161eb349&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0x037c03dddf4a5cd03c6fa3798d082a2a93702f72f7a2c1d60c0bc915031ee48a</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x037c03dddf4a5cd03c6fa3798d082a2a93702f72f7a2c1d60c0bc915031ee48a&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="transfer-sudt-tokens"></a>Transfer SUDT Tokens<a class="hash-link" href="#transfer-sudt-tokens" title="Direct link to heading">#</a></h3><p>The <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/sudt.ts#L134" target="_blank" rel="noopener noreferrer">sudt.transfer()</a> function can be used to transfer SUDT tokens.</p><p><strong>Constructor</strong></p><p><code>sudt.transfer</code>(txSkeleton: TransactionSkeletonType, fromInfos: FromInfo[], sudtToken: Token, toAddress: Address, amount: bigint, changeAddress?: Address, capacity?: bigint,  tipHeader?: Header,  {
config = undefined,
LocktimePoolCellCollector = LocktimeCellCollector,
splitChangeCell = false,
}: Options &amp; {
LocktimePoolCellCollector?: any;
splitChangeCell?: boolean;
} = {})</p><p>The <var>sudtToken</var> parameter is the lock hash of the SUDT tokens owner. You can use <a href="https://github.com/nervosnetwork/lumos/blob/c3bd18e6baac9c283995f25d226a689970dc9537/packages/common-scripts/src/sudt.ts#L699" target="_blank" rel="noopener noreferrer">sudt.ownerForSudt</a> to get the lock hash.</p><p>Example:</p><div class="mdxCodeBlock_1zKU"><div style="color:#403f53;background-color:#FBFBFB" class="codeBlockTitle_2eSY">hellolumos/src/buildTXs.ts/transferSUDT()</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-typescript codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">transferSUDT</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token parameter">fromInfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> FromInfo</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    toAddress</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> string</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    amount</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    capacity</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    txFee</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter"> bigint</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token parameter"></span></div><div class="token-line" style="color:#403f53"><span class="token parameter">    privateKey</span><span class="token parameter punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token parameter">string</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">Promise</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token maybe-class-name">Hash</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">let</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token maybe-class-name">TransactionSkeletonType</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(153, 76, 195);font-style:italic">TransactionSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain">cellProvider</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token constant" style="color:rgb(72, 118, 214)">INDEXER</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;Transfer SUDT tokens.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> sudtToken </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> sudt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">ownerForSudt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> sudt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">transfer</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">sudtToken</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> toAddress</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> amount</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">undefined</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> capacity</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">JSON</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">stringify</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">null</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">payFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">fromInfo</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token known-class-name class-name" style="color:rgb(17, 17, 17)">BigInt</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">txFee</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">createTransactionFromSkeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    skeleton </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> common</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">prepareSigningEntries</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries:&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token keyword" style="color:rgb(12, 150, 155)">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;signingEntries&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">toArray</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> tx </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">signandSeal</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">privateKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">const</span><span class="token plain"> hash </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">await</span><span class="token plain"> rpc</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">send_transaction</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(17, 17, 17)">console</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token method function property-access" style="color:rgb(153, 76, 195);font-style:italic">log</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;The transaction hash is&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain">hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Try the <code>transferSUDT</code> function in the Node.js REPL mode:</p><details><summary>CLICK ME</summary><p></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#403f53;background-color:#FBFBFB"><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain">$ node --experimental-repl-await</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Welcome to Node.js v14.0.0.</span></div><div class="token-line" style="color:#403f53"><span class="token plain">Type </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.help&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">more</span><span class="token plain"> information.</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"> accounts,querytransactions, buildTXs</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> require</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The server is started.</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain">// </span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const alice </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.ALICE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> const bob </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> accounts.BOB</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> await buildTXs.transferSUDT</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">alice.ADDRESS, bob.ADDRESS, 20000000000n,20000000000n,10000000n,alice.PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">Transfer SUDT tokens.</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;version&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;cell_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xd256a71c30b3f3adbf75a14add58a831336c4beebf04ed142f48d5f608655a48&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;out_point&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xace5ea83c478bb866edf122ff862085789158f5cbff155b7bb5f13058555b708&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;dep_group&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;header_deps&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;inputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;since&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;previous_output&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xf861df9da401fd25acbc400d9de79ccabad4090de39822c866be3efe0b86260e&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;since&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;previous_output&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;tx_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xb87c7a858395f5be72f73a60ef87784ba5a53ed243eacae003ef62d0c9740cac&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;index&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x4a817c800&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xecbe30bcf5c6b2f2d8ec2dd229a4603a7e206b99&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x82a4784a46f42916f144bfd1926fda614560e403bc131408881de82fee0724ad&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;data&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xf6ea009a4829de7aeecd75f3ae6bcdbaacf7328074ae52a48456a8793a4b1cca&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;capacity&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x5ccf69bde4&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;lock&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x7e00660b8ab122bca3ba468c5b6eee71f40b7d8e&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;code_hash&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x82a4784a46f42916f144bfd1926fda614560e403bc131408881de82fee0724ad&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;hash_type&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;data&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;args&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0xf6ea009a4829de7aeecd75f3ae6bcdbaacf7328074ae52a48456a8793a4b1cca&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;outputs_data&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x00c817a8040000000000000000000000&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x00e40b54020000000000000000000000&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;witnesses&quot;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x55000000100000005500000055000000410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;0x&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">signingEntries: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">    type: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;witness_args_lock&#x27;</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    index: </span><span class="token number" style="color:rgb(170, 9, 130)">0</span><span class="token plain">,</span></div><div class="token-line" style="color:#403f53"><span class="token plain">    message: </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0x93a5fa04bd70001d913acb986bd4a3dd4fa2ed4dabde2a1e6e55964d4093b36d&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain">The transaction </span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">hash</span><span class="token plain"> is 0xe7c73db5250d2ff1bbd933a2c5fd0925e8749d24768cb9125d4fc0adfebc02ea</span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;0xe7c73db5250d2ff1bbd933a2c5fd0925e8749d24768cb9125d4fc0adfebc02ea&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p></p></details></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/xying21/lumos_doc/tree/master/docs/tutorials/buildtransactions.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/lumos_doc/docs/tutorials/querytransactions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Query on Transactions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/lumos_doc/docs/tutorials/manageaccounts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Manage Accounts »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a></li><li><a href="#environment" class="table-of-contents__link">Environment</a></li><li><a href="#general-workflow" class="table-of-contents__link">General Workflow</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a><ul><li><a href="#transfer-ckb-in-a-common-transaction" class="table-of-contents__link">Transfer CKB in a Common Transaction</a></li><li><a href="#deposit-ckb-to-dao" class="table-of-contents__link">Deposit CKB to DAO</a></li><li><a href="#list-dao-cells" class="table-of-contents__link">List DAO Cells</a></li><li><a href="#withdraw-a-cell-from-nervos-dao" class="table-of-contents__link">Withdraw a Cell from Nervos DAO</a></li><li><a href="#unlock-a-withdrawn-cell" class="table-of-contents__link">Unlock a Withdrawn Cell</a></li><li><a href="#transfer-ckb-with-locktime-pool" class="table-of-contents__link">Transfer CKB with Locktime Pool</a></li><li><a href="#issue-sudt-tokens" class="table-of-contents__link">Issue SUDT Tokens</a></li><li><a href="#transfer-sudt-tokens" class="table-of-contents__link">Transfer SUDT Tokens</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Nervos</div></div></div></footer></div>
<script src="/lumos_doc/styles.e9d6a29e.js"></script>
<script src="/lumos_doc/runtime~main.4e7aa679.js"></script>
<script src="/lumos_doc/main.c54fe934.js"></script>
<script src="/lumos_doc/1.ce28eda0.js"></script>
<script src="/lumos_doc/1be78505.db3ab4b3.js"></script>
<script src="/lumos_doc/ece76bd1.c375ba78.js"></script>
<script src="/lumos_doc/53.0dfa0f1d.js"></script>
<script src="/lumos_doc/52.1be1cfd7.js"></script>
<script src="/lumos_doc/f976f453.43f5974d.js"></script>
<script src="/lumos_doc/51.96fb195b.js"></script>
<script src="/lumos_doc/99a42e31.f6b26a8e.js"></script>
</body>
</html>